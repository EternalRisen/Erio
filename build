#!/usr/bin/env node
const PG = require('pg');
const { queries } = require('./config/queries.js');

// Use sucrase to compile the typescript
require('child_process').execSync('npx sucrase -q ./src -d ./src-dist --transforms jsx,typescript,imports', {stdio: 'inherit'});
require('child_process').execSync('npx sucrase -q ./www -d ./www-dist --transforms jsx,typescript,imports', {stdio: 'inherit'});

// Make and edit anything with databases
(async () => {
    const pool = new PG.Pool();
    for (const query of queries) {
        await pool.query(query);
    }
})();
